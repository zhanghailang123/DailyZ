#### 状态机和状态模式 

状态模式很好理解

应该试着局部化每个状态的行为  封装变化

将动作委托到状态类

状态的转化需要放在状态类里还是实体类里

关键是这个时候实体有了状态了，是不是无法保证线程安全，因为实体持有实例变量属性。

那么设计一个优雅的状态机需要考虑哪些呢


需求 design

上下文 context factory condition action 需要考虑持久化吗 

取出来 根据 状态流转 然后 存下来

整合设计模式 开发一个轻量级优雅的状态机 要会整活 敢于整活

为什么需要状态机
> 鉴于目前业务复杂，代码逐渐屎山上雕花，重构代码成为了一件不得不着手开始做的事。
> 有几个目标
> - 业务语义表达清晰
> - 代码解耦，避免改一处影响多处的逻辑
> - 封装可变部分
> - 单一职责、开闭原则
> - 复用可配置
> 
> 

#### 代码设计

响应式编程 utils

策略模式  模板模式  状态模式  工厂模式  代理模式  单例模式  